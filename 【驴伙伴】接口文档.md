# 【驴伙伴】接口文档
## 1. 空闲车 rent

- 页面自动加载空闲车信息： `/rent/list`

  - 前端请求： 在 `onLoad()` 中自动请求该接口

  - 后端返回： 

    ```json
    [
        {
            rent:{
                rentId //帖子id
                openId //发布者id
                nickName //发布者昵称
                gender //性别 0：女 1：男
                avatarUrl //发布者头像
                area //发布者宿舍区：韵苑
                areaNum //发布者楼栋：16栋（传数字）
                weixin //微信号
                message //备注
                money //租车赏金
                manned //能否载人
                rent //出租信息展示 0：未发布 1：发布展示 2：发布未展示
                carImage //车辆图片
                time //创建或修改时间（备注： 显示：1小时前，传值：时间戳）
                count //阅读数
            },
            rentTime:[
            			{
            				week //求租周几： 1->周一,2-->周二
            				beginTime //求租的开始时间 hh:mm
            				endTime //求租的结束时间
        				}	
            		  ],
            favorite //是否收藏: 0: 否 1：是
        }
    ]
    ```

- 车辆筛选： `/rent/select`

  - 前端请求：

    ```json
    {
        //租车地点
        area //宿舍区
        areaNum //楼栋
        //租车时段
        week //周几: 1->周一,2-->周二
        //是否可载人
        manned //0:可载人 1：不可 2：不限
        //车主性别
        gender //0:女 1：男
    }
    ```

  - 后端返回：

    ```json
    [
        {
            {
            rent:{
                rentId //帖子id
                openId //发布者id
                nickName //发布者昵称
                gender //性别 0：女 1：男
                avatarUrl //发布者头像
                area //发布者宿舍区：韵苑
                areaNum //发布者楼栋：16栋（传数字）
                weixin //微信号
                message //备注
                money //租车赏金
                manned //能否载人
                rent //出租信息展示 0：未发布 1：发布展示 2：发布未展示
                carImage //车辆图片
                time //创建或修改时间（备注： 显示：1小时前，传值：时间戳）
                count //阅读数
            },
            rentTime:[
            			{
            				week //求租周几： 1->周一,2-->周二
            				beginTime //求租的开始时间 hh:mm
            				endTime //求租的结束时间
        				}	
            		  ],
    		favorite //是否收藏: 0: 否 1：是
        }
    ]
    ```

- 添加或取消收藏： `/rent/favorite`

  - 前端请求：

    ```json
    {
        rentId //帖子id
        openId //发布者id
        favorite //未收藏： 1，已收藏： 0
    }
    ```

  - 后台返回：前端收到结果，自己采用类似 ajax 处理

    ```json
    {
        rentId //帖子id
        openId //发布者id
        favorite //是否收藏: 0: 否 1：是
    }
    ```

- 统计阅读数：`/rent/count`

  - 前端请求：

    ```json
    {
        rentId //帖子id
        count //count + 1
    }
    ```

  - 后台返回：前端收到结果，自己采用类似 ajax 处理

    ```json
    {
        rentId //帖子id
        count //阅读数
    }
    ```

## 2. 想租车 publish

- 查看接口：`/publish/list` 

  - 前端请求： 在 `onLoad()` 中自动请求该接口

  - 后台返回：

    ```json
    [
        {
            publishId //帖子 id
            openId //发布者id
            nickName //发布者昵称
            gender //性别 0：女 1：男
            avatarUrl //发布者头像
            area //发布者宿舍区：韵苑
    		areaNum //发布者楼栋：16栋（传数字）
            weixin //微信号
            message //发布信息
            money //租车赏金
            yyyy //求租年月日： yyyy-MM-dd
            week //求租周几： 1->周一,2-->周二
            beginTime //求租的开始时间 hh:mm
            endTime //求租的结束时间 hh:mm
            createTime //创建时间（备注： 显示：1小时前，传值：时间戳）
            status //0:未接单 1：已接单
            count //阅读数
            favorite //是否收藏: 0: 否 2：是
        },
        {
            //...
        }
    ]
    ```

- 发布：`/publish/add` 

  - 前端请求：

    ```json
    {
        openId //发布者id
        nickName //发布者昵称
        gender //性别 0：女 1：男
        avatarUrl //发布者头像
        area //发布者宿舍区：韵苑
        areaNum //发布者楼栋：16栋（传数字）
        weixin //微信号
        message //发布信息
        money //租车赏金
        yyyy //求租年月日： yyyy-MM-dd
        week //求租周几： 1->周一,2-->周二
        beginTime //求租的开始时间 hh:mm
        endTime //求租的结束时间 hh:mm
        //发布时，默认为 0
        status //0:未接单 1：已接单
        count //阅读数
    }
    ```

  - 后台返回：

    ```json
    {
        publishId //id
        openId //发布者id
        nickName //发布者昵称
        gender //性别 0：女 1：男
        avatarUrl //发布者头像
        area //发布者宿舍区：韵苑
        areaNum //发布者楼栋：16栋（传数字）
        weixin //微信号
        message //发布信息
        money //租车赏金
        yyyy //求租年月日： yyyy-MM-dd
        week //求租周几： 1->周一,2-->周二
        beginTime //求租的开始时间 hh:mm
        endTime //求租的结束时间 hh:mm
        //发布时，默认为 0
        status //0:未接单 1：已接单
        count //阅读数
    }
    ```

- 添加或取消收藏：`/publish/favorite`

  - 前端请求：

    ```json
    {
        publishId //id
        openId //发布者id
        favorite //未收藏： 2，已收藏： 0
    }
    ```

  - 后台返回：前端收到结果，自己采用类似 ajax 处理

    ```json
    {
        publishId //id
        openId //发布者id
        favorite //是否收藏: 0: 否 2：是
    }
    ```

- 统计阅读数：`/publish/count`

  - 前端请求：

    ```json
    {
        publishId //id
        count
    }
    ```

  - 后台返回：前端收到结果，自己采用类似 ajax 处理

    ```json
    {
        publishId //id
        count
    }
    ```

## 3. 二手车 used

- 页面自动加载二手车信息： `/used/list`

  - 前端请求： 在 `onLoad()` 中自动请求该接口

  - 后台返回：

    ```json
    [
        {
            usedId //帖子id
            openId //发布者id
            nickName //发布者昵称
            gender //性别 0：女 1：男
            avatarUrl //发布者头像
            area //发布者宿舍区：韵苑
    		areaNum //发布者楼栋：16栋（传数字）
            weixin //微信号
            usedImage //二手车图片
            message //发布信息
            money //出手金额 
            createTime //创建时间（备注： 显示：1小时前，传值：时间戳）
            used //二手车信息展示 0：未发布 1：发布未出售 2：发布已出售
            count //阅读数
            favorite //是否收藏: 0: 否 3：是
        },
        {
            //...
        }
    ]
    ```

- 添加或取消收藏：`/used/favorite`

  - 前端请求：

    ```json
    {
        usedId //id
        openId //发布者id
        favorite //未收藏： 3，已收藏： 0
    }
    ```

  - 后台返回：前端收到结果，自己采用类似 ajax 处理

    ```json
    {
        usedId //id
        openId //发布者id
        favorite //是否收藏: 0: 否 3：是
    }
    ```

- 统计阅读数：`/used/count`

  - 前端请求：

    ```json
    {
        usedId //id
        count
    }
    ```

  - 后台返回：前端收到结果，自己采用类似 ajax 处理

    ```json
    {
        usedId //id
        count
    }
    ```

## 4. 买修车 repair





## 5. 我的 user

### 1. 用户信息

- 微信授权首次登陆(注册)： `/user/wxRegister` 

  - 前端请求： 

    ```json
    {
    	code //code 码
        nickName //昵称
    	gender //性别 0：女 1：男
    	avatarUrl //头像
    }
    ```

  - 后端返回：

    - 未收到前端传值

      ```json
      {
          openId:-1 //返回 -1 表示出错，提示用户重新授权登录
      }
      ```

    - 收到前端传值并正确获取

      ```json
      {
      	openId //openid + session_key
      	nickName //昵称
      	gender //性别 0：女 1：男
      	avatarUrl //头像
          //其他字段为空
      }
      ```

- 微信登陆时进行身份验证： `/user/wxLogin`

  - 前端请求： 

    ```json
    {
        code //code 码
    }
    ```

  - 后台返回：

    ```json
    {
        openId //与 storage 中的 openId 进行比较，相同则未改变，不同则改变
    }
    ```

- 补全个人信息： `/user/append` 

  - 前端请求： 

    ```json
    {
    	openId //前面的用户唯一 id：openid
    	college //学院：软件学院
    	grade //年级：16级
    	area //宿舍区：韵苑
    	areaNum //楼栋：16栋
    	weixin
    }
    ```

  - 后端返回：

    ```json
    {
    	openId //openid
    	nickName //昵称
    	gender //性别 0：女 1：男
    	avatarUrl //头像
        hustImage //学生证照片（备注：有该照片才能进行操作，否则只能看，不能租车、发布信息等）
    	college //学院：软件学院
    	grade //年级：16级
    	area //宿舍区：韵苑
    	areaNum //楼栋：16栋
    	weixin
    }
    ```

- 上传学生证照片：`/user/upload`

  - 前端请求

    ```json
    {
        openId //前面的用户唯一 id：openid
        hustImage //学生证照片（备注：有该照片才能进行操作，否则只能看，不能租车、发布信息等）
    }
    ```

  - 后端返回：

    ```json
    {
        openId //openid
    	nickName //昵称
    	gender //性别 0：女 1：男
    	avatarUrl //头像
        hustImage //学生证照片（备注：有该照片才能进行操作，否则只能看，不能租车、发布信息等）
    	college //学院：软件学院
    	grade //年级：16级
    	area //宿舍区：韵苑
    	areaNum //楼栋：16栋
    	weixin
    }
    ```

### 2. 我的出租

- 我的出租： 

  - 查看： `/user/rent/list`

    - 前端直接请求： `onLoad()` 直接加载

      ```json
      {
          openId //用户 id
      }
      ```

    - 后台返回

      ```json
      {
          rent:{
              rentId //帖子id
              openId //发布者id
              nickName //发布者昵称
              gender //性别 0：女 1：男
              avatarUrl //发布者头像
              area //发布者宿舍区：韵苑
              areaNum //发布者楼栋：16栋（传数字）
              weixin //微信号
              message //备注
              money //租车赏金
              manned //能否载人
              rent //出租信息展示 0：未发布 1：发布展示 2：发布未展示
              carImage //车辆图片
              time //创建或修改时间（备注： 显示：1小时前，传值：时间戳）
              count //阅读数
          },
          rentTime:[
                      {
                          week //求租周几： 周五
                          beginTime //求租的开始时间 hh:mm
                          endTime //求租的结束时间
                      }	
                    ]
      }
      ```

  - 修改或添加：`/user/rent/add`

    > 当首次添加时，选择图片时，已经自动创建了一条数据，所以会有 rentId

    - 前端请求： 

      ```json
      {
          rentId //帖子id
          openId //发布者id
          nickName //发布者昵称
          gender //性别 0：女 1：男
          avatarUrl //发布者头像
          area //发布者宿舍区：韵苑
          areaNum //发布者楼栋：16栋（传数字）
          weixin //微信号
          message //备注
          money //租车赏金
          manned //能否载人
          rent //出租信息展示 0：未发布 1：发布展示 2：发布未展示
          carImage //车辆图片
          count //阅读数
          rentTime:[
                      {
                          week //求租周几： 周五
                          beginTime //求租的开始时间 hh:mm
                          endTime //求租的结束时间
                      }	
                    ]
      }
      ```

    - 后台返回：

      ```json
      {
          rent:{
              rentId //帖子id
              openId //发布者id
              nickName //发布者昵称
              gender //性别 0：女 1：男
              avatarUrl //发布者头像
              area //发布者宿舍区：韵苑
              areaNum //发布者楼栋：16栋（传数字）
              weixin //微信号
              message //备注
              money //租车赏金
              manned //能否载人
              rent //出租信息展示 0：未发布 1：发布展示 2：发布未展示
              carImage //车辆图片
              time //创建或修改时间（备注： 显示：1小时前，传值：时间戳）
              count //阅读数
          },
          rentTime:[
                      {
                          week //求租周几： 周五
                          beginTime //求租的开始时间 hh:mm
                          endTime //求租的结束时间
                      }	
                    ]
      }
      ```

### 3. 我的求租

- 我的求租： 

  - 查看： `/user/publish/list` 

    - 前端请求：

      ```json
      {
          openId //用户id
      }
      ```

    - 后台返回：

      ```json
      {
          publishId //求租帖子 id
          openId //发布者id
          nickName //发布者昵称
          gender //性别 0：女 1：男
          avatarUrl //发布者头像
          area //发布者宿舍区：韵苑
          areaNum //发布者楼栋：16栋（传数字）
          weixin //微信号
          message //发布信息
          money //租车赏金
          yyyy //求租年月日： yyyy-MM-dd
          week //求租周几： 1->周一,2-->周二
          beginTime //求租的开始时间 hh:mm
          endTime //求租的结束时间 hh:mm
          createTime //创建时间
          status //0:未接单 1：已接单
      	count //阅读数
      }
      ```

  - 删除： `/user/publish/delete`

    - 前端请求： 

      ```json
      {
          publishId //求租帖子 id
          openId
      }
      ```

    - 后台返回：

      ```json
      //成功
      {
          openId
      }
      //失败
      {
          openId: -1
      }
      ```

### 4. 我的二手车

- 我的二手车： `/user/used` 

  - 查看： `/user/used/list`

    - 前端请求： 

      ```json
      {
          openId //用户id
      }
      ```

    - 后台返回：

      ```json
      {
          usedId //帖子id
          openId //发布者id
          nickName //发布者昵称
          gender //性别 0：女 1：男
          avatarUrl //发布者头像
          area //发布者宿舍区：韵苑
          areaNum //发布者楼栋：16栋（传数字）
          weixin //微信号
          usedImage //二手车图片
          message //发布信息
          used //二手车信息展示 0：未发布 1：发布未出售 2：发布已出售
          money //出手金额 
          createTime //创建时间（备注： 显示：1小时前，传值：时间戳）
          count //阅读数
      }
      ```

  - 修改： `user/used/change`

    - 前端请求：

      ```json
      {
          usedId //帖子id
          openId //发布者id
          nickName //发布者昵称
          gender //性别 0：女 1：男
          avatarUrl //发布者头像
          area //发布者宿舍区：韵苑
          areaNum //发布者楼栋：16栋（传数字）
          weixin //微信号
          usedImage //二手车图片
          message //发布信息
          used //二手车信息展示 0：未发布 1：发布未出售 2：发布已出售
          money //出手金额 
          createTime //创建时间（备注： 显示：1小时前，传值：时间戳）
          count //阅读数
      }
      ```

    - 后台返回：

      ```json
      {
          usedId //帖子id
          openId //发布者id
          nickName //发布者昵称
          gender //性别 0：女 1：男
          avatarUrl //发布者头像
          area //发布者宿舍区：韵苑
          areaNum //发布者楼栋：16栋（传数字）
          weixin //微信号
          usedImage //二手车图片
          message //发布信息
          used //二手车信息展示 0：未发布 1：发布未出售 2：发布已出售
          money //出手金额 
          createTime //创建时间（备注： 显示：1小时前，传值：时间戳）
          count //阅读数
      }
      ```

### 5. 我的收藏

- 显示我的收藏列表： `/user/favorites`

  - 前端请求：

    ```json
    {
        openId
    }
    ```

  - 后台返回：

    ```json
    {
        rent:[
            {
                rent:{
                    rentId //帖子id
                    openId //发布者id
                    nickName //发布者昵称
                    gender //性别 0：女 1：男
                    avatarUrl //发布者头像
                    area //发布者宿舍区：韵苑
                    areaNum //发布者楼栋：16栋（传数字）
                    weixin //微信号
                    message //备注
                    money //租车赏金
                    manned //能否载人
                    rent //出租信息展示 0：未发布 1：发布展示 2：发布未展示
                    carImage //车辆图片
                    time //创建或修改时间（备注： 显示：1小时前，传值：时间戳）
                    count //阅读数
                },
                rentTime:[
                            {
                                week //求租周几： 周五
                                beginTime //求租的开始时间 hh:mm
                                endTime //求租的结束时间
                            }	
                          ]
            }
        ],
        publish:[
            {
                publishId //求租帖子 id
                openId //发布者id
                nickName //发布者昵称
                gender //性别 0：女 1：男
                avatarUrl //发布者头像
                area //发布者宿舍区：韵苑
                areaNum //发布者楼栋：16栋（传数字）
                weixin //微信号
                message //发布信息
                money //租车赏金
                yyyy //求租年月日： yyyy-MM-dd
                week //求租周几： 1->周一,2-->周二
                beginTime //求租的开始时间 hh:mm
                endTime //求租的结束时间 hh:mm
                createTime //创建时间
                status //0:未接单 1：已接单
                count //阅读数
            }
        ],
        used:[
            {
                usedId //帖子id
                openId //发布者id
                nickName //发布者昵称
                gender //性别 0：女 1：男
                avatarUrl //发布者头像
                area //发布者宿舍区：韵苑
                areaNum //发布者楼栋：16栋（传数字）
                weixin //微信号
                usedImage //二手车图片
                message //发布信息
                used //二手车信息展示 0：未发布 1：发布未出售 2：发布已出售
                money //出手金额 
                createTime //创建时间（备注： 显示：1小时前，传值：时间戳）
                count //阅读数
            }
        ]
    }
    ```

    